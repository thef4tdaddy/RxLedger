

const cache = new Map();

// TTL in milliseconds: 24 hours
const TTL_MS = 24 * 60 * 60 * 1000; // 86,400,000 ms

const memoryCache = {
  get(key) {
    const entry = cache.get(key);
    if (!entry) return undefined;
    const { value, timestamp } = entry;
    if (Date.now() - timestamp > TTL_MS) {
      cache.delete(key);
      return undefined;
    }
    return value;
  },
  set(key, value) {
    cache.set(key, { value, timestamp: Date.now() });
  },
  has(key) {
    const entry = cache.get(key);
    if (!entry) return false;
    if (Date.now() - entry.timestamp > TTL_MS) {
      cache.delete(key);
      return false;
    }
    return true;
  },
  clear() {
    cache.clear();
  }
};

export default memoryCache;